# Debug Import Issue - H∆∞·ªõng d·∫´n kh·∫Øc ph·ª•c

## üêõ V·∫•n ƒë·ªÅ
Khi ch·ªçn file xong b·∫•m n√∫t Import th√¨ kh√¥ng th·∫•y ho·∫°t ƒë·ªông g√¨ c·∫£.

## üîç C√°ch debug

### 1. **Ki·ªÉm tra Console Logs**
M·ªü Developer Tools (F12) ‚Üí Console tab v√† th·ª±c hi·ªán c√°c b∆∞·ªõc sau:

1. **M·ªü trang "Qu·∫£n l√Ω l·ªãch kh√°m"**
2. **Click button "Import Excel"**
3. **Ch·ªçn file Excel**
4. **Click button "Import"**

B·∫°n s·∫Ω th·∫•y c√°c log sau n·∫øu ho·∫°t ƒë·ªông ƒë√∫ng:
```
showImportDialog called
importDialog.value set to: true
File selected: [object File]
Selected file: your-file.xlsx application/vnd.openxmlformats-officedocument.spreadsheetml.sheet 12345
File validated successfully
Import button clicked
Selected file: [object File]
Starting upload...
onFileUpload called
Starting upload process...
FormData created, calling API...
Calling appointmentSlotsStore.importAppointmentSlot...
```

### 2. **Ki·ªÉm tra Network Tab**
M·ªü Developer Tools (F12) ‚Üí Network tab:

1. **Filter by "XHR" ho·∫∑c "Fetch"**
2. **Th·ª±c hi·ªán import**
3. **Ki·ªÉm tra xem c√≥ request n√†o ƒë∆∞·ª£c g·ª≠i kh√¥ng**

N·∫øu c√≥ request, ki·ªÉm tra:
- **Status code**: 200, 201 (th√†nh c√¥ng) ho·∫∑c 400, 401, 500 (l·ªói)
- **Request headers**: C√≥ Authorization header kh√¥ng
- **Request payload**: C√≥ file ƒë∆∞·ª£c g·ª≠i kh√¥ng

### 3. **Test v·ªõi file HTML**
M·ªü file `test-import-component.html` trong browser ƒë·ªÉ test t·ª´ng b∆∞·ªõc:

1. **Test File Selection**: Ki·ªÉm tra file c√≥ ƒë∆∞·ª£c ch·ªçn ƒë√∫ng kh√¥ng
2. **Test FormData Creation**: Ki·ªÉm tra FormData c√≥ ƒë∆∞·ª£c t·∫°o ƒë√∫ng kh√¥ng
3. **Test API Call**: Ki·ªÉm tra API c√≥ ho·∫°t ƒë·ªông kh√¥ng
4. **Test Complete Flow**: Test to√†n b·ªô quy tr√¨nh

### 4. **Ki·ªÉm tra c√°c l·ªói th∆∞·ªùng g·∫∑p**

#### A. **File kh√¥ng ƒë∆∞·ª£c ch·ªçn**
```
Import button clicked
Selected file: null
No file selected
```
**Gi·∫£i ph√°p**: ƒê·∫£m b·∫£o ch·ªçn file tr∆∞·ªõc khi click Import

#### B. **File type kh√¥ng h·ª£p l·ªá**
```
File type kh√¥ng h·ª£p l·ªá: application/octet-stream
```
**Gi·∫£i ph√°p**: Ch·ªçn file Excel (.xlsx, .xls) th·ª±c s·ª±

#### C. **File qu√° l·ªõn**
```
File qu√° l·ªõn: 15728640 bytes
```
**Gi·∫£i ph√°p**: Ch·ªçn file nh·ªè h∆°n 10MB

#### D. **API kh√¥ng ho·∫°t ƒë·ªông**
```
API Error: Failed to fetch
```
**Gi·∫£i ph√°p**: 
- Ki·ªÉm tra k·∫øt n·ªëi internet
- Ki·ªÉm tra URL API
- Ki·ªÉm tra CORS settings

#### E. **Authorization l·ªói**
```
API Error: 401 Unauthorized
```
**Gi·∫£i ph√°p**: 
- Ki·ªÉm tra token c√≥ h·ª£p l·ªá kh√¥ng
- Ki·ªÉm tra token c√≥ h·∫øt h·∫°n kh√¥ng
- ƒêƒÉng nh·∫≠p l·∫°i ƒë·ªÉ l·∫•y token m·ªõi

### 5. **Ki·ªÉm tra Component Registration**

#### A. **ImportDialog kh√¥ng ƒë∆∞·ª£c import**
```
[Vue warn]: Failed to resolve component: ImportDialog
```
**Gi·∫£i ph√°p**: Ki·ªÉm tra import path trong AppointmentSlotsManagement.vue

#### B. **Component kh√¥ng ƒë∆∞·ª£c render**
```
[Vue warn]: Component ImportDialog is not registered
```
**Gi·∫£i ph√°p**: Restart development server

### 6. **Ki·ªÉm tra Store v√† API**

#### A. **Store kh√¥ng ho·∫°t ƒë·ªông**
```
Error importing appointment slot: [object Object]
```
**Gi·∫£i ph√°p**: Ki·ªÉm tra appointmentSlotsStore.importAppointmentSlot

#### B. **API service l·ªói**
```
Error: Network Error
```
**Gi·∫£i ph√°p**: Ki·ªÉm tra apiClient configuration

## üõ†Ô∏è C√°ch kh·∫Øc ph·ª•c

### 1. **Restart Development Server**
```bash
cd frontend
npm run dev
```

### 2. **Clear Browser Cache**
- Press `Ctrl + Shift + R` (hard refresh)
- Ho·∫∑c m·ªü Developer Tools ‚Üí Network ‚Üí Disable cache

### 3. **Ki·ªÉm tra File Excel**
- ƒê·∫£m b·∫£o file c√≥ ƒë·ªãnh d·∫°ng .xlsx ho·∫∑c .xls
- ƒê·∫£m b·∫£o file kh√¥ng b·ªã corrupt
- Th·ª≠ v·ªõi file kh√°c

### 4. **Ki·ªÉm tra Token**
- ƒê·∫£m b·∫£o token c√≤n h·ª£p l·ªá
- Ki·ªÉm tra format: `Bearer your-token-here`
- ƒêƒÉng nh·∫≠p l·∫°i n·∫øu c·∫ßn

### 5. **Ki·ªÉm tra Network**
- ƒê·∫£m b·∫£o k·∫øt n·ªëi internet ·ªïn ƒë·ªãnh
- Ki·ªÉm tra firewall/proxy settings
- Th·ª≠ v·ªõi network kh√°c

## üìû H·ªó tr·ª£

N·∫øu v·∫´n g·∫∑p v·∫•n ƒë·ªÅ, vui l√≤ng cung c·∫•p:

1. **Console logs** t·ª´ Developer Tools
2. **Network requests** t·ª´ Network tab
3. **File Excel** b·∫°n ƒëang s·ª≠ d·ª•ng
4. **Browser v√† version** (Chrome, Firefox, Safari, etc.)
5. **M√¥ t·∫£ chi ti·∫øt** c√°c b∆∞·ªõc ƒë√£ th·ª±c hi·ªán

## üîß Files li√™n quan

- `ImportDialog.vue` - Component ch√≠nh
- `AppointmentSlotsManagement.vue` - Trang s·ª≠ d·ª•ng component
- `appointment-slots.store.ts` - Store x·ª≠ l√Ω state
- `appointment-slots.service.ts` - API service
- `test-import-component.html` - File test
- `debug-import.html` - File debug API
